## 渗透测试和WEB安全漏洞的区别
- 渗透测试包含WEB安全漏洞
- web网站只是单一的网站服务， 在渗透测试过程中可能不是攻击网站, 而是寻找其它服务漏洞
- 渗透测试覆盖面更为广泛, 需要考虑如何深入利用该漏洞使得攻击效果最大化, 如提权, 内网攻击, 域环境攻击, 制作免杀后门等

## 渗透测试学习路径-计算机网络基础
- TCP/IP 体系结构 - 网络通信的基础
- HTTP 协议 - 网站访问的基础 (HTTPS, ARP, ICMP, DNS)

### IP地址
- IP地址是电子设备(计算机)在互联网上的唯一标识, 用来在互联网中寻找电脑
- 内网IP(局域网): 路由以内的网络, 可以连接互联网, 但是互联网无法直接连接内网(需要端口映射)
	- 优点: 安全, 解决IPv4地址耗尽问题
	- 缺点: 互联网无法直接连接至内网, 比如在自己电脑上搭建一个网站, 只有和你使用同一个路由器网络的主机才能访问
	- `10.0.0.0~10.255.255.255`, `172.16.0.0~172.31.255.255`, `192.168.0.0~192.168.255.255`
- 公网IP(互联网): 互联网IP地址
	- 优点: 可以和互联网资源互通, 日常应用如摄像头远程监控, 电脑远程开机, NAS等
	- 缺点: 安全性较低, IPv4地址资源耗尽
- IP地址就像家庭地址, 公网IP是小区地址, 小区内有很多住户, 内网IP就是具体的门牌号
- 查看ip命令:
	- 公网ip: 百度搜索: "ip"
	- 内网ip
		- Windows: ipconfig -all
		- Linux/Mac: ifconfig

### 端口
- TCP逻辑端口: 端口(port)是应用程序(服务)在计算机中的唯一标识, 可以认为是设备与外界通讯交流的出口. 端口可分为虚拟端口和物理端口, 其中虚拟端口指计算机内部或交换机路由器内的端口, 不可见, 可以通过命令查看
- 一台主机拥有很多个端口(应用程序/服务), 范围: 0~65535
- 源(客户端)端口随机, 目标(服务器)端口固定监听, 一一对应形成连接
- 查看端口命令:
	- Windows: netstat -ano
	- Linux netstat -anltup

### 网站访问的实现
- B(Borwser)/S(Server)结构
- 传输协议定义了浏览器和客户端传输数据的格式

#### HTTP 超文本传输协议: 
- 基于tcp/ip协议, 默认端口号80
- 请求消息和响应消息一一对应
- 每次请求相互独立, 是无状态协议, 有一个请求就有一个响应

##### 请求消息-request
1. 请求行
	- `请求方法(method)`
		- 8种, 常见的是GET和POST, 在控制台的网络查看
		- GET: 请求参数在URL地址中, URL有长度限制, 只能传输字符数据
		- POST: 请求参数在请求体中, 无大小限制, POST请求可以传输字符或字节数据
	- `Request-URI`: 要请求的[[0.2 网络协议基础#统一资源标识符URI|URI资源标识符]]^5a4b03
	- 协议及版本
2. 请求头
	- `HOST`: 目标请求主机域名/IP地址
	- `User-Agent`: 告诉服务器浏览器版本信息, 供服务器解决浏览器兼容问题
	- `Accept`: 传输文件类型
	- `Referer`: 告诉服务器从哪里来 (跳转来源)
	- `Cookie`: 储存在用户本地终端上的数据
	- `Connection`: 客户端要求服务器使用TCP持久连接, 指定`Keep-Alive`
	- `Content-Type`: (POST) 以[[7.29 文件上传实战#^05722c|MIME类型]]描述请求体的格式
	- `Content-Length`: 在定义Content-Type之后, 显示请求体的字符长度
3. 请求空行: 用来分隔请求头和请求体
4. 请求体(正文): 可以没有, 但是必须要有一行空着
	- GET: 提交数据时, 数据参数会**作为URL的一部分**, 放在文件路径后面发送给服务器, 称为*查询字符串*
	- POST: **发送的数据在请求体中**
![[Pasted image 20220905185116.png]]

##### 响应消息-response
1. 状态行
	- 协议及版本
	- 响应状态码
		- 1xx: 服务器接受浏览器消息未完成
		- 2xx: `200 OK`成功, `204 No Content` 成功, 无body数据, `206 Partical Content` 成功, 非全部资源
		- 3xx: 重定向: `301`(永久重定向), `302`(临时重定向), `304`(访问缓存)
		- 4xx: 客户端错误: `403`(访问被拒绝, 可以更改源ip为127.0.0.1绕过), `404`(没有找到对应资源), `405`(请求方式不被允许)
		- 5xx: 服务器错误: `500 Internal Server Error`(服务器内部出现异常), `501 Not Implemented`(功能未支持), `502`(服务器访问过多)
	- 状态码描述
2. 响应头
3. 响应空行
4. 响应体
	- 前端源码
![[Pasted image 20220905192145.png]]